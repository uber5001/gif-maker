(function(){var calls=0;window.observeAndSave=function(universe,callback,err){calls++;console.log(this);if(calls>0){if(err!=null)err("WARNING: Multiple calls to observeAndSave. Object already being observed. Call ignored")}else{console.log(JSON.stringify(universe).length);try{setTimeout(function(){console.log("SHAVED");localStorage.setItem("universe",JSON.stringify(universe))},100)}catch(e){if(err!=null)err("ERROR: Failed to observe")}}}})();function retrieveState(err){var universe=localStorage.getItem("universe");if(err!=null)err("ERROR: Local storage does not have a universe object");return null;return JSON.parse(universe)}